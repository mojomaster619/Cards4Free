<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Win FREE Pokémon Cards</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav>
        <a href="#" onclick="showTab('news-feed')"><span>News Feed</span></a>
        <a href="#" onclick="showTab('upcoming-cards')"><span>Upcoming Cards</a>
        <a href="#" onclick="showTab('card-gallery')"><span>Card Gallery</a>
        <a href="#" onclick="showTab('how-to-play')"><span>How to Play</a>
    </nav>

    <section>
        <!-- News Feed Tab -->
        <div id="news-feed" class="tab-content active">
            <h1>Here are the upcoming Lives!</h1>
            <div id="news-container"></div>
        </div>

        <!-- Upcoming Cards Tab -->
        <div id="upcoming-cards" class="tab-content">
            <p>Details about upcoming cards.</p>
        </div>

        <!-- Card Gallery Tab -->
        <div id="card-gallery" class="tab-content">
            <p>Below are all the cards you can win.</p>
            <div id="gallery-images"></div>
        </div>

        <!-- How to Play Tab -->
        <div id="how-to-play" class="tab-content">
            <h1>How to Play</h1>
            <p>Instructions on how to play the Pokémon card game.</p>
        </div>
    </section>
    <!-- Social Media Icons -->
    <div class="social-media">
        <a href="https://www.tiktok.com/@freecards.triviagame" target="_blank">
            <img src="assets/tiktok.ico" alt="TikTok" class="social-icon">
        </a>
        <a href="https://www.youtube.com/c/Cards4Free" target="_blank">
            <img src="assets/youtube.ico" alt="YouTube" class="social-icon">
        </a>
    </div>
    <script>
        // Load News Feed content
        async function loadNews() {
            try {
                const response = await fetch('./news.json');
                if (!response.ok) {
                    throw new Error('Failed to load news JSON');
                }
                const newsData = await response.json();
                const newsContainer = document.getElementById('news-container');
                newsContainer.innerHTML = ''; // Clear existing content

                newsData.forEach(newsItem => {
                    const newsBlock = document.createElement('div');
                    newsBlock.className = 'news-block';
                    newsBlock.innerHTML = `<strong>${newsItem.title}</strong><p>${newsItem.content}</p>`;
                    newsContainer.appendChild(newsBlock);
                });
            } catch (error) {
                console.error('Error loading news:', error);
                const newsContainer = document.getElementById('news-container');
                newsContainer.innerHTML = '<p>Failed to load news. Please try again later.</p>';
            }
        }

        // Load images dynamically only when Card Gallery tab is activated
        async function loadImages() {
            try {
                const response = await fetch('./images/images.json');
                if (!response.ok) {
                    throw new Error('Failed to load image JSON');
                }
                const imageData = await response.json();
                const galleryImages = document.getElementById('gallery-images');
                galleryImages.innerHTML = ''; // Clear existing content

                imageData.images.forEach(imageSrc => {
                    const div = document.createElement('div');
                    div.className = 'gallery-tile';
                    div.innerHTML = `<img src="./images/${imageSrc}" alt="Pokémon card image">`;
                    galleryImages.appendChild(div);
                });
            } catch (error) {
                console.error('Error loading images:', error);
                const galleryImages = document.getElementById('gallery-images');
                galleryImages.innerHTML = '<p>Failed to load images. Please try again later.</p>';
            }
        }

        // Ensure everything loads after DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            loadNews(); // Load news when the page loads
        });

        // Load images only when Card Gallery tab is clicked
        function showTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');

            if (tabId === 'card-gallery') {
                loadImages();
            }
        }
    </script>

</body>
</html>
